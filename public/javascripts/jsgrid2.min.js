!function(t,e,i){function n(t,i){var n=e(t);n.data(s,this),this._container=n,this.data=[],this.fields=[],this._editingRow=null,this._sortField=null,this._sortOrder=h,this._firstDisplayingPage=1,this._init(i),this.render()}var r="JSGrid",s=r,a="JSGridItem",o="JSGridEditRow",h="asc",d="desc",l="{first}",c="{pages}",u="{prev}",g="{next}",p="{last}",f="{pageIndex}",_="{pageCount}",C="javascript:void(0);",v=function(t,i){return e.isFunction(t)?t.apply(i,e.makeArray(arguments).slice(2)):t},m={loadData:e.noop,insertItem:e.noop,updateItem:e.noop,deleteItem:e.noop};n.prototype={width:"auto",height:"auto",updateOnResize:!0,rowClass:e.noop,rowRenderer:null,rowClick:function(t){this.editing&&this.editItem(e(t.event.target).closest("tr"))},noDataContent:"Not found",noDataRowClass:"jsgrid-nodata-row",heading:!0,headerRowRenderer:null,headerRowClass:"jsgrid-header-row",filtering:!1,filterRowRenderer:null,filterRowClass:"jsgrid-filter-row",inserting:!1,insertRowRenderer:null,insertRowClass:"jsgrid-insert-row",editing:!1,editRowRenderer:null,editRowClass:"jsgrid-edit-row",confirmDeleting:!0,deleteConfirm:"Are you sure?",selecting:!0,selectedRowClass:"jsgrid-selected-row",oddRowClass:"jsgrid-row",evenRowClass:"jsgrid-alt-row",sorting:!1,sortableClass:"jsgrid-header-sortable",sortAscClass:"jsgrid-header-sort jsgrid-header-sort-asc",sortDescClass:"jsgrid-header-sort jsgrid-header-sort-desc",paging:!1,pagerContainer:null,pageIndex:1,pageSize:20,pageButtonCount:15,pagerFormat:"Pages: {first} {prev} {pages} {next} {last} &nbsp;&nbsp; {pageIndex} of {pageCount}",pagePrevText:"Prev",pageNextText:"Next",pageFirstText:"First",pageLastText:"Last",pageNavigatorNextText:"...",pageNavigatorPrevText:"...",pagerContainerClass:"jsgrid-pager-container",pagerClass:"jsgrid-pager",pagerNavButtonClass:"jsgrid-pager-nav-button",pageClass:"jsgrid-pager-page",currentPageClass:"jsgrid-pager-current-page",pageLoading:!1,autoload:!1,controller:m,loadIndication:!0,loadIndicationDelay:500,loadMessage:"Please, wait...",loadShading:!0,onRefreshing:e.noop,onRefreshed:e.noop,onItemDeleting:e.noop,onItemDeleted:e.noop,onItemInserting:e.noop,onItemInserted:e.noop,onItemUpdating:e.noop,onItemUpdated:e.noop,onDataLoading:e.noop,onDataLoaded:e.noop,onOptionChanging:e.noop,onOptionChanged:e.noop,onError:e.noop,containerClass:"jsgrid",tableClass:"jsgrid-table",gridHeaderClass:"jsgrid-grid-header",gridBodyClass:"jsgrid-grid-body",_init:function(t){e.extend(this,t),this._initLoadStrategy(),this._initController(),this._initFields(),this._attachWindowLoadResize(),this._attachWindowResizeCallback()},loadStrategy:function(){return this.pageLoading?new jsGrid.loadStrategies.PageLoadingStrategy(this):new jsGrid.loadStrategies.DirectLoadingStrategy(this)},_initLoadStrategy:function(){this._loadStrategy=v(this.loadStrategy,this)},_initController:function(){this._controller=e.extend({},m,v(this.controller,this))},loadIndicator:function(t){return new jsGrid.LoadIndicator(t)},_initFields:function(){var t=this;t.fields=e.map(t.fields,function(i){if(e.isPlainObject(i)){var n=i.type&&jsGrid.fields[i.type]||jsGrid.Field;i=new n(i)}return i._grid=t,i})},_attachWindowLoadResize:function(){e(t).on("load",e.proxy(this._refreshSize,this))},_attachWindowResizeCallback:function(){this.updateOnResize&&e(t).on("resize",e.proxy(this._refreshSize,this))},_detachWindowResizeCallback:function(){e(t).off("resize",this._refreshSize)},option:function(t,e){var i,n;return 1===arguments.length?this[t]:(i={option:t,oldValue:this[t],newValue:e},this._callEventHandler(this.onOptionChanging,i),this._handleOptionChange(i.option,i.newValue),n={option:i.option,value:i.newValue},void this._callEventHandler(this.onOptionChanged,n))},_handleOptionChange:function(t,e){switch(this[t]=e,t){case"width":case"height":this._refreshSize();break;case"rowClass":case"rowRenderer":case"rowClick":case"noDataText":case"noDataRowClass":case"noDataContent":case"selecting":case"selectedRowClass":case"oddRowClass":case"evenRowClass":this._refreshContent();break;case"pageButtonCount":case"pagerFormat":case"pagePrevText":case"pageNextText":case"pageFirstText":case"pageLastText":case"pageNavigatorNextText":case"pageNavigatorPrevText":case"pagerClass":case"pagerNavButtonClass":case"pageClass":case"currentPageClass":this._refreshPager();break;case"fields":this._initFields(),this.render();break;case"data":case"editing":case"heading":case"filtering":case"inserting":case"paging":this.refresh();break;case"pageLoading":this._initLoadStrategy(),this.search();break;case"pageIndex":this.openPage(e);break;case"pageSize":this.refresh(),this.search();break;case"editRowRenderer":case"editRowClass":this.cancelEdit();break;default:this.render()}},destroy:function(){this._detachWindowResizeCallback(),this._clear(),this._container.removeData(s)},render:function(){return this._clear(),this._container.addClass(this.containerClass).css("position","relative").append(this._createHeader()).append(this._createBody()),this._pagerContainer=this._createPagerContainer(),this._loadIndicator=this._createLoadIndicator(),this.refresh(),this.autoload?this.loadData():e.Deferred().resolve().promise()},_createLoadIndicator:function(){return v(this.loadIndicator,this,{message:this.loadMessage,shading:this.loadShading,container:this._container})},_clear:function(){this.cancelEdit(),clearTimeout(this._loadingTimer),this._pagerContainer&&this._pagerContainer.empty(),this._container.empty().css({position:"",width:"",height:""})},_createHeader:function(){var t=this._headerRow=this._createHeaderRow(),i=this._filterRow=this._createFilterRow(),n=this._insertRow=this._createInsertRow(),r=this._headerGrid=e("<table>").addClass(this.tableClass).append(t).append(i).append(n),s=this._header=e("<div>").addClass(this.gridHeaderClass).append(r);return s},_createBody:function(){var t=this._content=e("<tbody>"),i=this._bodyGrid=e("<table>").addClass(this.tableClass).append(t),n=this._body=e("<div>").addClass(this.gridBodyClass).append(i);return n},_createPagerContainer:function(){var t=this.pagerContainer||e("<div>").appendTo(this._container);return e(t).addClass(this.pagerContainerClass)},_eachField:function(t){var i=this;e.each(this.fields,function(e,n){return t.call(i,n,e)})},_createHeaderRow:function(){if(e.isFunction(this.headerRowRenderer))return e(this.headerRowRenderer());var t=e("<tr>").addClass(this.headerRowClass);return this._eachField(function(i,n){var r=e("<th>").addClass(i.css).appendTo(t).append(i.headerTemplate?i.headerTemplate():"").css("width",i.width);this.sorting&&i.sorting&&r.addClass(this.sortableClass).on("click",e.proxy(function(){this.sort(n)},this))}),t},_createFilterRow:function(){if(e.isFunction(this.filterRowRenderer))return e(this.filterRowRenderer());var t=e("<tr>").addClass(this.filterRowClass);return this._eachField(function(i){e("<td>").addClass(i.css).appendTo(t).append(i.filterTemplate?i.filterTemplate():"").width(i.width)}),t},_createInsertRow:function(){if(e.isFunction(this.insertRowRenderer))return e(this.insertRowRenderer());var t=e("<tr>").addClass(this.insertRowClass);return this._eachField(function(i){e("<td>").addClass(i.css).appendTo(t).append(i.insertTemplate?i.insertTemplate():"").width(i.width)}),t},_callEventHandler:function(t,i){return t.call(this,e.extend(i,{grid:this}))},reset:function(){this._resetSorting(),this._resetPager(),this.refresh()},_resetPager:function(){this._firstDisplayingPage=1,this._setPage(1)},_resetSorting:function(){this._sortField=null,this._sortOrder=h,this._clearSortingCss()},refresh:function(){this._callEventHandler(this.onRefreshing),this.cancelEdit(),this._refreshHeading(),this._refreshFiltering(),this._refreshInserting(),this._refreshContent(),this._refreshPager(),this._refreshSize(),this._callEventHandler(this.onRefreshed)},_refreshHeading:function(){this._headerRow.toggle(this.heading)},_refreshFiltering:function(){this._filterRow.toggle(this.filtering)},_refreshInserting:function(){this._insertRow.toggle(this.inserting)},_refreshContent:function(){var t=this._content;if(t.empty(),!this.data.length)return t.append(this._createNoDataRow()),this;for(var e=this._loadStrategy.firstDisplayIndex(),i=this._loadStrategy.lastDisplayIndex(),n=e;i>n;n++){var r=this.data[n];t.append(this._createRow(r,n))}},_createNoDataRow:function(){var t=v(this.noDataContent,this);return e("<tr>").addClass(this.noDataRowClass).append(e("<td>").attr("colspan",this.fields.length).append(t))},_createNoDataContent:function(){return e.isFunction(this.noDataRenderer)?this.noDataRenderer():this.noDataText},_createRow:function(t,i){var n;return e.isFunction(this.rowRenderer)?n=e(this.rowRenderer(t,i)):(n=e("<tr>"),this._renderCells(n,t)),n.addClass(this._getRowClasses(t,i)).data(a,t).on("click",e.proxy(function(e){this.rowClick({item:t,itemIndex:i,event:e})},this)),this.selecting&&this._attachRowHover(n),n},_getRowClasses:function(t,e){var i=[];return i.push((e+1)%2?this.oddRowClass:this.evenRowClass),i.push(v(this.rowClass,this,t,e)),i.join(" ")},_attachRowHover:function(t){var i=this.selectedRowClass;t.hover(function(){e(this).addClass(i)},function(){e(this).removeClass(i)})},_renderCells:function(t,e){return this._eachField(function(i){t.append(this._createCell(e,i))}),this},_createCell:function(t,i){var n,r=t[i.name];return n=e.isFunction(i.cellRenderer)?e(i.cellRenderer(r,t)):e("<td>").append(i.itemTemplate?i.itemTemplate(r,t):r),n.addClass(i.css).width(i.width),i.align&&n.addClass("jsgrid-align-"+i.align),n},sort:function(t,i){return e.isPlainObject(t)&&(i=t.order,t=t.field),this._clearSortingCss(),this._setSortingParams(t,i),this._setSortingCss(),this._loadStrategy.sort()},_clearSortingCss:function(){this._headerRow.find("th").removeClass(this.sortAscClass).removeClass(this.sortDescClass)},_setSortingParams:function(t,e){t=this._normalizeSortingField(t),e=e||(this._sortField===t?this._reversedSortOrder(this._sortOrder):h),this._sortField=t,this._sortOrder=e},_normalizeSortingField:function(t){return e.isNumeric(t)?this.fields[t]:"string"==typeof t?e.grep(this.fields,function(e){return e.name===t})[0]:t},_reversedSortOrder:function(t){return t===h?d:h},_setSortingCss:function(){var t=e.inArray(this._sortField,this.fields);this._headerRow.find("th").eq(t).addClass(this._sortOrder===h?this.sortAscClass:this.sortDescClass)},_sortData:function(){var t=this._sortFactor(),e=this._sortField;e&&this.data.sort(function(i,n){return t*e.sortingFunc(i[e.name],n[e.name])})},_sortFactor:function(){return this._sortOrder===h?1:-1},_itemsCount:function(){return this._loadStrategy.itemsCount()},_pagesCount:function(){var t=this._itemsCount(),e=this.pageSize;return Math.floor(t/e)+(t%e?1:0)},_refreshPager:function(){var t=this._pagerContainer;t.empty(),this.paging&&this._pagesCount()>1?t.show().append(this._createPager()):t.hide()},_createPager:function(){var t=this.pageIndex,i=this._pagesCount(),n=this.pagerFormat.split(" ");n=e.map(n,e.proxy(function(n){var r=n;return n===c?r=this._createPages():n===l?r=t>1?this._createPagerNavButton(this.pageFirstText,1):"":n===u?r=t>1?this._createPagerNavButton(this.pagePrevText,t-1):"":n===g?r=i>t?this._createPagerNavButton(this.pageNextText,t+1):"":n===p?r=i>t?this._createPagerNavButton(this.pageLastText,i):"":n===f?r=t:n===_&&(r=i),e.isArray(r)?r.concat([" "]):[r," "]},this));var r=e("<div>").addClass(this.pagerClass).append(n);return r},_createPages:function(){var t,e=this._pagesCount(),i=this.pageButtonCount,n=this._firstDisplayingPage,r=[];n>1&&r.push(this._createPagerPageNavButton(this.pageNavigatorPrevText,this.showPrevPages));for(var s=0,t=n;i>s&&e>=t;s++,t++)r.push(t===this.pageIndex?this._createPagerCurrentPage():this._createPagerPage(t));return e>n+i-1&&r.push(this._createPagerPageNavButton(this.pageNavigatorNextText,this.showNextPages)),r},_createPagerNavButton:function(t,e){return this._createPagerButton(t,this.pagerNavButtonClass,function(){this.openPage(e)})},_createPagerPageNavButton:function(t,e){return this._createPagerButton(t,this.pagerNavButtonClass,e)},_createPagerPage:function(t){return this._createPagerButton(t,this.pageClass,function(){this.openPage(t)})},_createPagerButton:function(t,i,n){var r=e("<a>").attr("href",C).html(t).on("click",e.proxy(n,this));return e("<span>").addClass(i).append(r)},_createPagerCurrentPage:function(){return e("<span>").addClass(this.pageClass).addClass(this.currentPageClass).text(this.pageIndex)},_refreshSize:function(){this._refreshHeight(),this._refreshWidth()},_refreshWidth:function(){var t,e=this._headerGrid,i=this._bodyGrid,n=this.width,r=this._scrollBarWidth();"auto"===n&&(e.width("auto"),t=e.outerWidth(),n=t+r),e.width(""),i.width(""),this._header.css("padding-right",r),this._container.width(n),t=e.outerWidth(),i.width(t)},_scrollBarWidth:function(){var t;return function(){if(t===i){var n=e("<div style='width:50px;height:50px;overflow:hidden;position:absolute;top:-10000px;left:-10000px;'></div>"),r=e("<div style='height:100px;'></div>");n.append(r).appendTo("body");var s=r.innerWidth();n.css("overflow-y","auto");var a=r.innerWidth();n.remove(),t=s-a}return t}}(),_refreshHeight:function(){var t,e=this._container,i=this._pagerContainer,n=this.height;e.height(n),"auto"!==n&&(n=e.height(),t=this._header.outerHeight(!0),i.parents(e).length&&(t+=i.outerHeight(!0)),this._body.outerHeight(n-t))},showPrevPages:function(){var t=this._firstDisplayingPage,e=this.pageButtonCount;this._firstDisplayingPage=t>e?t-e:1,this._refreshPager()},showNextPages:function(){var t=this._firstDisplayingPage,e=this.pageButtonCount,i=this._pagesCount();this._firstDisplayingPage=t+2*e>i?i-e+1:t+e,this._refreshPager()},openPage:function(t){1>t||t>this._pagesCount()||(this._setPage(t),this._loadStrategy.openPage(t))},_setPage:function(t){var e=this._firstDisplayingPage,i=this.pageButtonCount;this.pageIndex=t,e>t&&(this._firstDisplayingPage=t),t>e+i-1&&(this._firstDisplayingPage=t-i+1)},_controllerCall:function(t,i,n){this._showLoading();var r=this._controller;if(!r||!r[t])throw new Error("controller has no method '"+t+"'");return e.when(r[t](i)).done(e.proxy(n,this)).fail(e.proxy(this._errorHandler,this)).always(e.proxy(this._hideLoading,this))},_errorHandler:function(){this._callEventHandler(this.onError,{args:e.makeArray(arguments)})},_showLoading:function(){clearTimeout(this._loadingTimer),this._loadingTimer=setTimeout(e.proxy(function(){this._loadIndicator.show()},this),this.loadIndicationDelay)},_hideLoading:function(){clearTimeout(this._loadingTimer),this._loadIndicator.hide()},search:function(t){return this._resetSorting(),this._resetPager(),this.loadData(t)},loadData:function(t){return t=t||(this.filtering?this._getFilter():{}),e.extend(t,this._loadStrategy.loadParams(),this._sortingParams()),this._callEventHandler(this.onDataLoading,{filter:t}),this._controllerCall("loadData",t,function(t){this._loadStrategy.finishLoad(t),this._callEventHandler(this.onDataLoaded,{data:t})})},_getFilter:function(){var t={};return this._eachField(function(e){e.filtering&&(t[e.name]=e.filterValue())}),t},_sortingParams:function(){return this.sorting&&this._sortField?{sortField:this._sortField.name,sortOrder:this._sortOrder}:{}},clearFilter:function(){var t=this._createFilterRow();return this._filterRow.replaceWith(t),this._filterRow=t,this.search()},insertItem:function(t){var e=t||this._getInsertItem();return this._callEventHandler(this.onItemInserting,{item:e}),this._controllerCall("insertItem",e,function(t){t=t||e,this._loadStrategy.finishInsert(t),this._callEventHandler(this.onItemInserted,{item:t})})},_getInsertItem:function(){var t={};return this._eachField(function(e){e.inserting&&(t[e.name]=e.insertValue())}),t},clearInsert:function(){var t=this._createInsertRow();this._insertRow.replaceWith(t),this._insertRow=t,this.refresh()},editItem:function(t){var e=this._rowByItem(t);e.length&&this._editRow(e)},_rowByItem:function(t){return t.jquery||t.nodeType?e(t):this._content.find("tr").filter(function(){return e.data(this,a)===t})},_editRow:function(t){if(this.editing){this._editingRow&&this.cancelEdit();var e=t.data(a),i=this._createEditRow(e);this._editingRow=t,t.hide(),i.insertAfter(t),t.data(o,i)}},_createEditRow:function(t){if(e.isFunction(this.editRowRenderer))return e(this.editRowRenderer(t,this._itemIndex(t)));var i=e("<tr>").addClass(this.editRowClass);return this._eachField(function(n){e("<td>").addClass(n.css).appendTo(i).append(n.editTemplate?n.editTemplate(t[n.name],t):"").width(n.width||"auto")}),i},updateItem:function(t,e){1===arguments.length&&(e=t);var i=t?this._rowByItem(t):this._editingRow;return e=e||this._getEditedItem(),this._updateRow(i,e)},_updateRow:function(t,i){var n=t.data(a),r=this._itemIndex(n);return e.extend(n,i),this._callEventHandler(this.onItemUpdating,{row:t,item:n,itemIndex:r}),this._controllerCall("updateItem",n,function(e){e=e||n,this._finishUpdate(t,e,r),this._callEventHandler(this.onItemUpdated,{row:t,item:e,itemIndex:r})})},_itemIndex:function(t){return e.inArray(t,this.data)},_finishUpdate:function(t,e,i){this.cancelEdit(),this.data[i]=e,t.replaceWith(this._createRow(e,i))},_getEditedItem:function(){var t={};return this._eachField(function(e){e.editing&&(t[e.name]=e.editValue())}),t},cancelEdit:function(){if(this._editingRow){var t=this._editingRow,e=t.data(o);e.remove(),t.show(),this._editingRow=null}},deleteItem:function(e){var i=this._rowByItem(e);if(i.length&&(!this.confirmDeleting||t.confirm(v(this.deleteConfirm,this,i.data(a)))))return this._deleteRow(i)},_deleteRow:function(t){var e=t.data(a),i=this._itemIndex(e);return this._callEventHandler(this.onItemDeleting,{row:t,item:e,itemIndex:i}),this._controllerCall("deleteItem",e,function(){this._loadStrategy.finishDelete(e,i),this._callEventHandler(this.onItemDeleted,{row:t,item:e,itemIndex:i})})}},e.fn.jsGrid=function(t){var r=e.makeArray(arguments),a=r.slice(1),o=this;return this.each(function(){var r,h=e(this),d=h.data(s);if(d)if("string"==typeof t){if(r=d[t].apply(d,a),r!==i&&r!==d)return o=r,!1}else d._detachWindowResizeCallback(),d._init(t),d.render();else new n(h,t)}),o},t.jsGrid={Grid:n,fields:[]}}(window,jQuery),function(t,e,i){function n(t){this._init(t)}n.prototype={container:"body",message:"Loading...",shading:!0,zIndex:1e3,shaderClass:"jsgrid-load-shader",loadPanelClass:"jsgrid-load-panel",_init:function(t){e.extend(!0,this,t),this._initContainer(),this._initShader(),this._initLoadPanel()},_initContainer:function(){this._container=e(this.container)},_initShader:function(){this.shading&&(this._shader=e("<div>").addClass(this.shaderClass).hide().css({position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:this.zIndex}).appendTo(this._container))},_initLoadPanel:function(){this._loadPanel=e("<div>").addClass(this.loadPanelClass).text(this.message).hide().css({position:"absolute",top:"50%",left:"50%",zIndex:this.zIndex}).appendTo(this._container)},show:function(){var t=this._loadPanel.show(),e=t.outerWidth(),i=t.outerHeight();t.css({marginTop:-i/2,marginLeft:-e/2}),this._shader.show()},hide:function(){this._loadPanel.hide(),this._shader.hide()}},t.LoadIndicator=n}(jsGrid,jQuery),function(t,e,i){function n(t){this._grid=t}function r(t){this._grid=t,this._itemsCount=0}n.prototype={firstDisplayIndex:function(){var t=this._grid;return t.option("paging")?(t.option("pageIndex")-1)*t.option("pageSize"):0},lastDisplayIndex:function(){var t=this._grid,e=t.option("data").length;return t.option("paging")?Math.min(t.option("pageIndex")*t.option("pageSize"),e):e},itemsCount:function(){return this._grid.option("data").length},openPage:function(t){this._grid.refresh()},loadParams:function(){return{}},sort:function(){return this._grid._sortData(),this._grid.refresh(),e.Deferred().resolve().promise()},finishLoad:function(t){this._grid.option("data",t)},finishInsert:function(t){var e=this._grid;e.option("data").push(t),e.refresh()},finishDelete:function(t,e){var i=this._grid;i.option("data").splice(e,1),i.reset()}},r.prototype={firstDisplayIndex:function(){return 0},lastDisplayIndex:function(){return this._grid.option("data").length},itemsCount:function(){return this._itemsCount},openPage:function(t){this._grid.loadData()},loadParams:function(){var t=this._grid;return{pageIndex:t.option("pageIndex"),pageSize:t.option("pageSize")}},sort:function(){return this._grid.loadData()},finishLoad:function(t){this._itemsCount=t.itemsCount,this._grid.option("data",t.data)},finishInsert:function(t){this._grid.search()},finishDelete:function(t,e){this._grid.search()}},t.loadStrategies={DirectLoadingStrategy:n,PageLoadingStrategy:r}}(jsGrid,jQuery),function(t,e,i){var n={string:function(t,e){return t.localeCompare(e)},number:function(t,e){return t-e},date:function(t,e){return t-e},numberAsString:function(t,e){return parseFloat(t)-parseFloat(e)}};t.sortStrategies=n}(jsGrid,jQuery),function(t,e,i){function n(t){e.extend(!0,this,t),this.sortingFunc=this._getSortingFunc()}n.prototype={name:"",title:"",css:"",align:"",width:100,filtering:!0,inserting:!0,editing:!0,sorting:!0,sorter:"string",headerTemplate:function(){return this.title||this.name},itemTemplate:function(t,e){return t},filterTemplate:function(){return""},insertTemplate:function(){return""},editTemplate:function(t,e){return this._value=t,this.itemTemplate(t,e)},filterValue:function(){return""},insertValue:function(){return""},editValue:function(){return this._value},_getSortingFunc:function(){var i=this.sorter;if(e.isFunction(i))return i;if("string"==typeof i)return t.sortStrategies[i];throw Error('Wrong sorter for the field "'+this.name+'"!')}},t.Field=n}(jsGrid,jQuery),function(t,e,i){function n(t){r.call(this,t)}var r=t.Field;n.prototype=new r({autosearch:!0,filterTemplate:function(){var t=this._grid,e=this.filterControl=this._createTextBox();return this.autosearch&&e.on("keypress",function(e){13===e.which&&(t.search(),e.preventDefault())}),e},insertTemplate:function(){var t=this.insertControl=this._createTextBox();return t},editTemplate:function(t){var e=this.editControl=this._createTextBox();return e.val(t),e},filterValue:function(){return this.filterControl.val()},insertValue:function(){return this.insertControl.val()},editValue:function(){return this.editControl.val()},_createTextBox:function(){return e("<input>").attr("type","text")}}),t.fields.text=t.TextField=n}(jsGrid,jQuery),function(t,e,i){function n(t){r.call(this,t)}var r=t.TextField;n.prototype=new r({sorter:"number",align:"right",filterValue:function(){return this.filterControl.val()},insertValue:function(){return this.insertControl.val()},editValue:function(){return this.editControl.val()},_createTextBox:function(){return e("<input>").attr("type","number")}}),t.fields.floatnumber=t.FloatField=n}(jsGrid,jQuery),function(t,e,i){function n(t){r.call(this,t)}var r=t.TextField;n.prototype=new r({sorter:"number",align:"right",filterValue:function(){return parseInt(this.filterControl.val()||0,10)},insertValue:function(){return parseInt(this.insertControl.val()||0,10)},editValue:function(){return parseInt(this.editControl.val()||0,10)},_createTextBox:function(){return e("<input>").attr("type","number")}}),t.fields.number=t.NumberField=n}(jsGrid,jQuery),function(t,e,i){function n(t){r.call(this,t)}var r=t.TextField;n.prototype=new r({insertTemplate:function(){var t=this.insertControl=this._createTextArea();return t},editTemplate:function(t){var e=this.editControl=this._createTextArea();return e.val(t),e},_createTextArea:function(){return e("<textarea>")}}),t.fields.textarea=t.TextAreaField=n}(jsGrid,jQuery),function(t,e,i){function n(t){this.items=[],this.selectedIndex=-1,this.valueField="",this.textField="",r.call(this,t),!t.valueType&&this.valueField&&this.items.length&&(this.valueType=typeof this.items[0][this.valueField])}var r=t.NumberField;n.prototype=new r({align:"center",valueType:"number",itemTemplate:function(t){var i,n=this.items,r=this.valueField,s=this.textField;return i=r?e.grep(n,function(e,i){return e[r]===t})[0]||{}:n[t],(s?i[s]:i)||""},filterTemplate:function(){var t=this._grid,e=this.filterControl=this._createSelect();return this.autosearch&&e.on("change",function(e){t.search()}),e},insertTemplate:function(){var t=this.insertControl=this._createSelect();return t},editTemplate:function(t){var e=this.editControl=this._createSelect();return t!==i&&e.val(t),e},filterValue:function(){var t=this.filterControl.val();return"number"===this.valueType?parseInt(t||0,10):t},insertValue:function(){var t=this.insertControl.val();return"number"===this.valueType?parseInt(t||0,10):t},editValue:function(){var t=this.editControl.val();return"number"===this.valueType?parseInt(t||0,10):t},_createSelect:function(){var t=e("<select>"),i=this.valueField,n=this.textField,r=this.selectedIndex;return e.each(this.items,function(s,a){var o=i?a[i]:s,h=n?a[n]:a,d=e("<option>").attr("value",o).text(h).appendTo(t);d.prop("selected",r===s)}),t}}),t.fields.select=t.SelectField=n}(jsGrid,jQuery),function(t,e,i){function n(t){r.call(this,t)}var r=t.Field;n.prototype=new r({sorter:"number",align:"center",autosearch:!0,itemTemplate:function(t){return this._createCheckbox().prop({checked:t,disabled:!0})},filterTemplate:function(){var t=this._grid,i=this.filterControl=this._createCheckbox();return i.prop({readOnly:!0,indeterminate:!0}),i.on("click",function(){var t=e(this);t.prop("readOnly")?t.prop({checked:!1,readOnly:!1}):t.prop("checked")||t.prop({readOnly:!0,indeterminate:!0})}),this.autosearch&&i.on("click",function(){t.search()}),i},insertTemplate:function(){var t=this.insertControl=this._createCheckbox();return t},editTemplate:function(t){var e=this.editControl=this._createCheckbox();return e.prop("checked",t),e},filterValue:function(){return this.filterControl.get(0).indeterminate?i:this.filterControl.is(":checked")},insertValue:function(){return this.insertControl.is(":checked")},editValue:function(){return this.editControl.is(":checked")},_createCheckbox:function(){return e("<input>").attr("type","checkbox")}}),t.fields.checkbox=t.CheckboxField=n}(jsGrid,jQuery),function(t,e,i){function n(t){r.call(this,t)}var r=t.Field;n.prototype=new r({css:"jsgrid-control-field",align:"center",width:50,filtering:!1,inserting:!1,editing:!1,sorting:!1,buttonClass:"jsgrid-button",modeButtonClass:"jsgrid-mode-button",searchModeButtonClass:"jsgrid-search-mode-button",insertModeButtonClass:"jsgrid-insert-mode-button",editButtonClass:"jsgrid-edit-button",deleteButtonClass:"jsgrid-delete-button",searchButtonClass:"jsgrid-search-button",clearFilterButtonClass:"jsgrid-clear-filter-button",insertButtonClass:"jsgrid-insert-button",updateButtonClass:"jsgrid-update-button",cancelEditButtonClass:"jsgrid-cancel-edit-button",searchModeButtonTooltip:"Switch to searching",insertModeButtonTooltip:"Switch to inserting",editButtonTooltip:"Edit",deleteButtonTooltip:"Delete",searchButtonTooltip:"Search",clearFilterButtonTooltip:"Clear filter",insertButtonTooltip:"Insert",updateButtonTooltip:"Update",cancelEditButtonTooltip:"Cancel edit",editButton:!0,deleteButton:!0,clearFilterButton:!0,modeSwitchButton:!0,headerTemplate:function(){return this.modeSwitchButton?this._createModeSwitchButton():""},itemTemplate:function(t,i){var n=e([]);return this.editButton&&(n=n.add(this._createEditButton(i))),this.deleteButton&&(n=n.add(this._createDeleteButton(i))),n},filterTemplate:function(){var t=this._createSearchButton();return this.clearFilterButton?t.add(this._createClearFilterButton()):t},insertTemplate:function(){return this._createInsertButton()},editTemplate:function(){return this._createUpdateButton().add(this._createCancelEditButton())},_createModeSwitchButton:function(){var t=!1,i=e.proxy(function(){n.attr("title",t?this.searchModeButtonTooltip:this.insertModeButtonTooltip).toggleClass(this.insertModeButtonClass,!t).toggleClass(this.searchModeButtonClass,t)},this),n=this._createGridButton(this.modeButtonClass,"",function(e){t=!t,e.option("inserting",t),e.option("filtering",!t),i()});return i(),n},_createEditButton:function(t){return this._createGridButton(this.editButtonClass,this.editButtonTooltip,function(e,i){e.editItem(t),i.stopPropagation()})},_createDeleteButton:function(t){return this._createGridButton(this.deleteButtonClass,this.deleteButtonTooltip,function(e,i){e.deleteItem(t),i.stopPropagation()})},_createSearchButton:function(){return this._createGridButton(this.searchButtonClass,this.searchButtonTooltip,function(t){t.search()})},_createClearFilterButton:function(){return this._createGridButton(this.clearFilterButtonClass,this.clearFilterButtonTooltip,function(t){t.clearFilter()})},_createInsertButton:function(){return this._createGridButton(this.insertButtonClass,this.insertButtonTooltip,function(t){t.insertItem(),t.clearInsert()})},_createUpdateButton:function(){return this._createGridButton(this.updateButtonClass,this.updateButtonTooltip,function(t,e){t.updateItem(),e.stopPropagation()})},_createCancelEditButton:function(){return this._createGridButton(this.cancelEditButtonClass,this.cancelEditButtonTooltip,function(t,e){t.cancelEdit(),e.stopPropagation()})},_createGridButton:function(t,i,n){var r=this._grid;return e("<input>").addClass(this.buttonClass).addClass(t).attr({type:"button",title:i}).on("click",function(t){n(r,t)})},editValue:function(){return""}}),t.fields.control=t.ControlField=n}(jsGrid,jQuery);